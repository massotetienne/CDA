{"ast":null,"code":"var _jsxFileName = \"/home/etienne/Bureau/dev/CDA/Front/src/pages/News.jsx\",\n    _s = $RefreshSig$();\n\nimport Logo from \"../components/Logo\";\nimport Navigation from \"../components/Navigation\";\nimport axios from 'axios';\nimport { useEffect, useState } from 'react';\nimport Article from \"../components/Article\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst News = () => {\n  _s();\n\n  const [newsData, setNewsData] = useState([]);\n  const [name, setName] = useState(\"\");\n  const [text, setText] = useState(\"\");\n  const [error, setError] = useState(false);\n  useEffect(() => {\n    getArticle();\n  }, []);\n\n  const getArticle = () => {\n    axios.get('http://localhost:3004/article/get').then(res => setNewsData(res.data));\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (text.length < 140) {\n      setError(true);\n    } else {\n      axios.post('http://localhost:3004/article', {\n        name,\n        text,\n        date: Date.now()\n      }).then(() => {\n        setError(false);\n        setName(\"\");\n        setText(\"\");\n        getArticle();\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"news-container\",\n    children: [/*#__PURE__*/_jsxDEV(Navigation, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Logo, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"News\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: e => handleSubmit(e),\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: e => setName(e.target.value),\n        type: \"text\",\n        placeholder: \"Nom\",\n        value: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        style: {\n          border: error ? \"1px solid red\" : \"1px solid #61dafb\"\n        },\n        onChange: e => setText(e.target.value),\n        placeholder: \"Message\",\n        value: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Veuillez \\xE9crire un minimum de 140 caract\\xE8res\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 31\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Envoyer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: newsData.sort((a, b) => b.date - a.date).map(article => /*#__PURE__*/_jsxDEV(Article, {\n        article: article\n      }, article.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 9\n  }, this);\n};\n\n_s(News, \"9xrK6qZ9TTdCs85noQy3KXks5XM=\");\n\n_c = News;\nexport default News;\n\nvar _c;\n\n$RefreshReg$(_c, \"News\");","map":{"version":3,"sources":["/home/etienne/Bureau/dev/CDA/Front/src/pages/News.jsx"],"names":["Logo","Navigation","axios","useEffect","useState","Article","News","newsData","setNewsData","name","setName","text","setText","error","setError","getArticle","get","then","res","data","handleSubmit","e","preventDefault","length","post","date","Date","now","target","value","border","sort","a","b","map","article","id"],"mappings":"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","sourcesContent":["\nimport Logo from \"../components/Logo\";\nimport Navigation from \"../components/Navigation\";\nimport axios from 'axios';\nimport { useEffect, useState } from 'react';\nimport Article from \"../components/Article\";\n\nconst News = () => {\n    const [newsData, setNewsData] = useState([]);\n    const [name, setName] = useState(\"\");\n    const [text, setText] = useState(\"\")\n    const [error, setError] = useState(false);\n\n    useEffect(() => {\n        getArticle();\n    }, []);\n\n    const getArticle = () => {\n        axios.get('http://localhost:3004/article/get')\n            .then((res) => setNewsData(res.data));\n    };\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        if (text.length < 140) {\n            setError(true);\n\n        } else {\n\n\n            axios.post('http://localhost:3004/article', {\n                name,\n                text,\n                date: Date.now(),\n            }).then(() => {\n                setError(false)\n                setName(\"\");\n                setText(\"\");\n                getArticle();\n            })\n        }\n    };\n\n    return (\n        <div className=\"news-container\">\n            <Navigation />\n            <Logo />\n            <h1>News</h1>\n            <form onSubmit={(e) => handleSubmit(e)}>\n                <input onChange={\n                    (e) => setName(e.target.value)}\n                    type=\"text\" placeholder=\"Nom\"\n                    value={name} />\n                {/* (e): evenement listener\n     onChange : quand changement\n     setAuthor : la const stoké plus haut \n     e.target.value : tu cible la valeur de la cible (target) */}\n                <textarea\n                    style={{border : error ? \"1px solid red\" : \"1px solid #61dafb\"}}\n                    onChange={(e) => setText(e.target.value)}\n                    placeholder=\"Message\"\n                    value={text}>\n                    </textarea>\n                    {error && <p>Veuillez écrire un minimum de 140 caractères</p>}\n\n                <input type=\"submit\" value=\"Envoyer\" />\n            </form>\n            <ul>{newsData\n                .sort((a, b) => b.date - a.date)\n                .map((article) => (\n                    <Article key={article.id} article={article} />\n                ))}\n            </ul>\n        </div>\n    );\n};\n\nexport default News;"]},"metadata":{},"sourceType":"module"}